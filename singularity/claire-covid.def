Bootstrap: docker
From: pytorch/pytorch:1.7.0-cuda11.0-cudnn8-runtime
Stage: build

%files
    nnframework/    /opt/claire-covid/
    metrics/        /opt/claire-covid/

%environment
    export PYTHONPATH="${PYTHONPATH}:/opt/claire-covid"

%post
    pip install --no-cache-dir  \
        nibabel==3.2.0          \
        pandas==1.1.4           \
        pydicom==2.1.1          \
        pyprg==0.1.1b7          \
        scikit-learn==0.23.2    \
        scipy==1.4.1            \
        tensorboard==2.3.0      \

%labels
    org.label-schema.name       "CLAIRE COVID19 DNN Benchmark"
    org.label-schema.vcs-url    "https://github.com/CLAIRE-COVID/AI-Covid19-benchmarking"

%help
    Container for CLAIRE benchmarking of Deep Neural Network models for COVID19 diagnosis (https://github.com/CLAIRE-COVID/AI-Covid19-benchmarking)
