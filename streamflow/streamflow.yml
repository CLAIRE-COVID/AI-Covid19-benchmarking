#!/usr/bin/env streamflow
version: v1.0
workflows:
  master:
    type: cwl
    config:
      file: cwl/main.cwl
      settings: cwl/config.yml
    bindings:
      - step: /open_step
        target:
          model: slurm-cineca
      - step: /sum_step
        target:
          model: slurm-cineca
      - step: /comb_step
        target:
          model: slurm-cineca
models:
  ssh-cineca:
    type: ssh
    config:
      file: environment/slurm/cineca_template.jinja2
      hostname: login.m100.cineca.it
      sshKey: /home/glassofwhiskey/.ssh/keys/marconi100_rsa
      sshKeyPassphrase: hv3w4etj!!
      username: icolonne
  slurm-cineca:
    type: slurm
    from: ssh-cineca
